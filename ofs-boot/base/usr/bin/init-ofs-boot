#!/bin/sh

DC=$(lspci -nn | grep '\[03')

[ "$(echo "$DC" | grep Intel)" != "" ] && modprobe i915
[ "$(echo "$DC" | grep AMD/ATI)" != "" ] && modprobe amdgpu
[ "$(echo "$DC" | grep NVIDIA)" != "" ] && modprobe nouveau


busybox mount -o remount,rw /


if [ "$(cat /proc/cmdline | grep " splash")" != "" ] ; then
 /sbin/plymouthd --tty=tty16 --mode=boot
 plymouth show-splash
fi

[ -f /usr/sbin/0-init-ofs-boot ] && . /usr/sbin/0-init-ofs-boot

exec /sbin/init "$*"
